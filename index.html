<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chaires et décorations</title>
    <link rel="stylesheet" href="acceuil.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.counter.dev/script.js" data-id="60e6dec0-5302-4919-bf23-c00a8c2b5a84"
        data-utcoffset="1"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const cartIcons = document.querySelectorAll(".add-to-cart");

            // Récupérer l'utilisateur connecté
            const user = JSON.parse(sessionStorage.getItem("loggedUser"));



            if (!user) {
                alert("Veuillez vous connecter pour gérer le panier !");
                return;
                navLinks.innerHTML = `
            <li><a href="Pages/panier.html"><i class="fa-solid fa-cart-shopping"></i></a></li>
            <li><a href="index.html">Accueil</a></li>
            <li><a href="Pages/Contact.html">Contact</a></li>
            
            <li><a href="./authentification/login.html" class="btn-nav">Login</a></li>
            <li><a href="./authentification/register.html" class="btn-nav">S'inscrire</a></li>
        `;

            }
            else {
                // Si connecté : afficher boutons profil et déconnexion
                navLinks.innerHTML = `
            <li><a href="Pages/panier.html"><i class="fa-solid fa-cart-shopping"></i></a></li>
            <li><a href="index.html">Accueil</a></li>
            <li><a href="Pages/Contact.html">Contact</a></li>
            <li><a href="Pages/Profile.html">Profil</a></li>
            <li><a href="#" class="${logoutBtnClass} btn-nav">Déconnexion</a></li>

        `;
                document.addEventListener("DOMContentLoaded", () => {
                    const logoutBtn = document.querySelector(".logout-btn");

                    if (logoutBtn) {
                        logoutBtn.addEventListener("click", (e) => {
                            e.preventDefault();

                            // Supprimer la session
                            sessionStorage.removeItem("loggedUser");

                            alert("Vous êtes déconnecté.");

                            // Redirection vers login
                            window.location.href = "./authentification/login.html";
                        });
                    }
                });
            }
            // Charger les paniers depuis localStorage
            let carts = JSON.parse(localStorage.getItem("carts")) || {};
            if (!carts[user.email]) carts[user.email] = [];

            // Fonction pour vérifier si un produit est déjà dans le panier
            function isInCart(productName) {
                return carts[user.email].some(p => p.name === productName);
            }

            // Mettre à jour les icônes selon le panier existant
            cartIcons.forEach(icon => {
                const name = icon.dataset.name;
                if (isInCart(name)) {
                    icon.classList.add("in-cart");
                    icon.style.color = "red"; // icône rouge si déjà ajouté
                }
            });

            // Gérer le clic sur chaque icône
            cartIcons.forEach(icon => {
                icon.addEventListener("click", function (e) {
                    e.preventDefault();

                    const product = {
                        name: this.dataset.name,
                        price: this.dataset.price,
                        quantite: this.dataset.quantite
                    };

                    if (isInCart(product.name)) {
                        // Supprimer du panier
                        carts[user.email] = carts[user.email].filter(p => p.name !== product.name);
                        this.classList.remove("in-cart");
                        this.style.color = "";
                        alert(`"${product.name}" retiré du panier !`);
                    } else {
                        // Ajouter au panier
                        carts[user.email].push(product);
                        this.classList.add("in-cart");
                        this.style.color = "red";
                        alert(`"${product.name}" ajouté au panier avec succès !`);
                    }

                    // Enregistrer le panier mis à jour
                    localStorage.setItem("carts", JSON.stringify(carts));
                });
            });
        });


    </script>




</head>

<body>

    <nav class="navbar">
        <div class="logo"><img src="./images/logo.png" alt="logo"></div>
        <input type="text" placeholder="Rechercher..." class="sidebar-search">
        <ul class="nav-links">
            <li><a href="Pages/panier.html"> <i class="fa-solid fa-cart-shopping"></i></a>
            </li>
            <li><a href="index.html">Accueil</a></li>
            <li><a href="Pages/Contact.html">Contact</a></li>
            <li><a href="Pages/Profile.html">Profil</a></li>

            <li><a href="./authentification/login.html" class="btn-nav">connexion</a></li>
            <li><a href="./authentification/register.html" class="btn-nav">S'inscrire</a></li>
        </ul>

        <div class="burger">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </nav>

    <div class="container">
        <div class="desc">
            <p
                style="font-family:system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;">
                parfait pour votre</p>

            <h1 style="font-family: Times New Roman;">STYLE</h1>
            <p>le meilleur mobilier pour la vie de tous les jours</p>
            <button class="order">Commander</button>
        </div>
        <img src="./images/c1.png" alt="image">
    </div>
    <div class="container_products">

        <a href="./Chaires/Chaire1.html" class="item-link">
            <div class="item">
                <img src="./images/i6.jpg" alt="image">
                <div class="description_item">
                    <h6>Chair 1</h6>
                    <p class="price">50DT</p>
                    <i class="fa-solid fa-cart-shopping add-to-cart" data-name="Chair 1" data-price="50DT"
                        data-quantite="1"></i>
                </div>
            </div>
        </a>

        <a href="./Chaires/chaire2.html" class="item-link">
            <div class="item">
                <img src="./images/5177ffae-6fdd-4d72-9b1f-01a8e6b19f28.jpeg" alt="image">
                <div class="description_item">
                    <h6>Chair 2</h6>
                    <p class="price">80DT</p>
                    <i class="fa-solid fa-cart-shopping add-to-cart" data-name="Chair 2" data-price="80DT"
                        data-quantite="1"></i>
                </div>
            </div>
        </a>

        <a href="./Chaires/chaire3.html" class="item-link">
            <div class="item">
                <img src="./images/i3.jpg" alt="image">
                <div class="description_item">
                    <h6>Chair 3</h6>
                    <p class="price">54DT</p>
                    <i class="fa-solid fa-cart-shopping add-to-cart" data-name="Chair 3" data-price="54DT"
                        data-quantite="1"></i>
                </div>
            </div>
        </a>

        <a href="./Chaires/chaire4.html" class="item-link">
            <div class="item">
                <img src="./images/c4301a74-4baa-450e-b25e-dd0eeb302f45.jpeg" alt="image">
                <div class="description_item">
                    <h6>Chair 4</h6>
                    <p class="price">90DT</p>
                    <i class="fa-solid fa-cart-shopping add-to-cart" data-name="Chair 4" data-price="90DT"
                        data-quantite="1"></i>
                </div>
            </div>
        </a>

        <a href="./Chaires/chaire5.html" class="item-link">
            <div class="item">
                <img src="./images/j1.jpeg" alt="image">
                <div class="description_item">
                    <h6>Chair 5</h6>
                    <p class="price">40DT</p>
                    <i class="fa-solid fa-cart-shopping add-to-cart" data-name="Chair 5" data-price="40DT"
                        data-quantite="1"></i>
                </div>
            </div>
        </a>

        <a href="./Chaires/chaire6.html" class="item-link">
            <div class="item">
                <img src="./images/im1.jpeg" alt="image">
                <div class="description_item">
                    <h6>Chair 6</h6>
                    <p class="price">66DT</p>
                    <i class="fa-solid fa-cart-shopping add-to-cart" data-name="Chair 6" data-price="66DT"
                        data-quantite="1"></i>
                </div>
            </div>
        </a>

        <a href="./Chaires/chaire7.html" class="item-link">
            <div class="item">
                <img src="./images/im2.jpeg" alt="image">
                <div class="description_item">
                    <h6>Chair 7</h6>
                    <p class="price">83DT</p>
                    <i class="fa-solid fa-cart-shopping add-to-cart" data-name="Chair 7" data-price="83DT"
                        data-quantite="1"></i>
                </div>
            </div>
        </a>

        <a href="./Chaires/chaire8.html" class="item-link">
            <div class="item">
                <img src="./images/i4.jpg" alt="image">
                <div class="description_item">
                    <h6>Chair 8</h6>
                    <p class="price">80DT</p>
                    <i class="fa-solid fa-cart-shopping add-to-cart" data-name="Chair 8" data-price="80DT"
                        data-quantite="1"></i>
                </div>
            </div>
        </a>

        <a href="./Chaires/chaire9.html" class="item-link">
            <div class="item">
                <img src="./images/i5.jpg" alt="image">
                <div class="description_item">
                    <h6>Chair 9</h6>
                    <p class="price">74DT</p>
                    <i class="fa-solid fa-cart-shopping add-to-cart" data-name="Chair 9" data-price="74DT"
                        data-quantite="1"></i>
                </div>
            </div>
        </a>

    </div>

    <footer class="site-footer">
        <div class="footer-container">
            <div class="footer-section about">
                <h4>À propos</h4>
                <p>Site e-commerce spécialisé dans les chaires et décorations.</p>
            </div>
            <div class="footer-section links">
                <h4>Liens rapides</h4>
                <ul>
                    <li><a href="index.html">Accueil</a></li>
                    <li><a href="Pages/Contact.html">Contact</a></li>
                    <li><a href="Pages/Profile.html">Mon compte</a></li>
                </ul>
            </div>
            <div class="footer-section social">
                <div class="contact-info">
                    <h4>Nos coordonnées</h4>
                    <p><i class="fa-solid fa-location-dot"></i> Tunis, Tunisie</p>
                    <p><i class="fa-solid fa-phone"></i> +216 55 123 456</p>
                    <p><i class="fa-solid fa-envelope"></i> contact@monsite.com</p>

                </div>
                <h4>Suivez-nous</h4>
                <div class="social-icons">
                    <a href="#"><i class="fa-brands fa-facebook-f"></i></a>
                    <a href="#"><i class="fa-brands fa-instagram"></i></a>
                    <a href="#"><i class="fa-brands fa-twitter"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            &copy; 2025 MonSite. Tous droits réservés.
        </div>
    </footer>

    <script>
        // ---- JS pour le menu burger ----
        const burger = document.querySelector('.burger');
        const navLinks = document.querySelector('.nav-links');

        burger.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });
    </script>

</body>

</html>